# Spring Cloud Services CLI plugin

This repository provides a [Cloud Foundry CLI](https://github.com/cloudfoundry/cli) plugin for
Spring Cloud Services.

For information on plugin development, see
[Developing a plugin](https://github.com/cloudfoundry/cli/tree/master/plugin/plugin_examples).

## Building

To build the plugin, [install Go](https://golang.org/doc/install)
(development of this plugin began with Go 1.7.x.) and issue the following commands:
```bash
$ go get -u github.com/pivotal-cf/spring-cloud-services-cli-plugin
$ go install github.com/pivotal-cf/spring-cloud-services-cli-plugin 

```
You will find the compiled plugin in, e.g. `$GOPATH/bin/spring-cloud-services-cli-plugin`.

## Installing

To install the plugin in the cf CLI, issue this command:
```bash
$ cf install-plugin -f <path to compiled plugin>

```

The plugin's commands may then be listed by issuing `cf help`.

## Testing

Install the Ginkgo testing framework and the Gomega matcher library as follows:
```bash
$ go get -u github.com/onsi/ginkgo/ginkgo
$ go get -u github.com/onsi/gomega

```
Ensure that your `$PATH` includes the output directory, e.g. `$GOPATH/bin`.

Run the tests as follows:
```bash
$ go test github.com/pivotal-cf/spring-cloud-services-cli-plugin/... 
```

If you prefer to run tests using Ginkgo, change directory to a specific package and
run Ginkgo from there. For example:
```bash
$ cd $GOPATH/src/github.com/pivotal-cf/spring-cloud-services-cli-plugin/eureka
$ ginkgo
```

## Developing

Test mocks are created using [Counterfeiter](https://github.com/maxbrunsfeld/counterfeiter),
which may be installed as follows:
```bash
$ go get -u github.com/maxbrunsfeld/counterfeiter
$ go install github.com/maxbrunsfeld/counterfeiter
```
Ensure that your `$PATH` includes the output directory, e.g. `$GOPATH/bin`.

Interfaces to be mocked are tagged `//go:generate counterfeiter ...` and so mocks may
be regenerated by issuing:
```bash
$ go generate github.com/pivotal-cf/spring-cloud-services-cli-plugin/...
```
